(()=>{"use strict";var r={n:o=>{var e=o&&o.__esModule?()=>o.default:()=>o;return r.d(e,{a:e}),e},d:(o,e)=>{for(var t in e)r.o(e,t)&&!r.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:e[t]})},o:(r,o)=>Object.prototype.hasOwnProperty.call(r,o)};const o=window.wp.data,e=window.wp.apiFetch;var t=r.n(e);const w="SET_WORKFLOWS",l="SET_LOADING",s="SET_ERROR",n="ADD_WORKFLOW",a="UPDATE_WORKFLOW",i="DELETE_WORKFLOW",d="SET_GENERATING",f={workflows:[],loading:!1,error:null,generating:{}},k={setWorkflows:r=>({type:w,workflows:r}),setLoading:r=>({type:l,loading:r}),setError:r=>({type:s,error:r}),addWorkflow:r=>({type:n,workflow:r}),updateWorkflow:r=>({type:a,workflow:r}),deleteWorkflow:r=>({type:i,workflowId:r}),setGenerating:(r,o)=>({type:d,workflowId:r,generating:o}),*fetchWorkflows(){yield k.setLoading(!0),yield k.setError(null);try{const r=yield t()({path:"/wp-content-flow/v1/workflows"});yield k.setWorkflows(r.workflows||[])}catch(r){yield k.setError(r.message)}finally{yield k.setLoading(!1)}},*createWorkflow(r){yield k.setLoading(!0),yield k.setError(null);try{const o=yield t()({path:"/wp-content-flow/v1/workflows",method:"POST",data:r});return yield k.addWorkflow(o),o}catch(r){throw yield k.setError(r.message),r}finally{yield k.setLoading(!1)}}},g=(0,o.createReduxStore)("wp-content-flow/workflows",{reducer:(r=f,o)=>{switch(o.type){case w:return{...r,workflows:o.workflows};case l:return{...r,loading:o.loading};case s:return{...r,error:o.error};case n:return{...r,workflows:[...r.workflows,o.workflow]};case a:return{...r,workflows:r.workflows.map(r=>r.id===o.workflow.id?o.workflow:r)};case i:return{...r,workflows:r.workflows.filter(r=>r.id!==o.workflowId)};case d:return{...r,generating:{...r.generating,[o.workflowId]:o.generating}};default:return r}},actions:k,selectors:{getWorkflows:r=>r.workflows,getWorkflow:(r,o)=>r.workflows.find(r=>r.id===o),getActiveWorkflows:r=>r.workflows.filter(r=>"active"===r.status),isLoading:r=>r.loading,getError:r=>r.error,isGenerating:(r,o)=>!!r.generating[o]}});(0,o.register)(g)})();