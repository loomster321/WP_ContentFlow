(()=>{"use strict";var e={87:e=>{e.exports=window.wp.element},143:e=>{e.exports=window.wp.data},427:e=>{e.exports=window.wp.components},455:e=>{e.exports=window.wp.apiFetch},723:e=>{e.exports=window.wp.i18n},912:(e,t,n)=>{var o=n(723),l=n(427),a=n(87),r=n(143);window.wp.richText;var c=n(455),i=n.n(c);function s(){const[e,t]=(0,a.useState)(!1),[n,c]=(0,a.useState)(""),[s,p]=(0,a.useState)(null),[w,m]=(0,a.useState)([]),[d,u]=(0,a.useState)(!1),[f,g]=(0,a.useState)(""),_=(0,r.useSelect)(e=>{const t=e("wp-content-flow/workflows");return t?t.getActiveWorkflows():[]},[]),{createNotice:h}=(0,r.useDispatch)("core/notices");(0,a.useEffect)(()=>{const e=()=>{const e=window.getSelection();if(e.rangeCount>0&&!e.isCollapsed){const n=e.getRangeAt(0),o=e.toString().trim();o.length>10&&E(n)?(c(o),p(n),t(!0)):v()}else v()};return document.addEventListener("selectionchange",e),()=>{document.removeEventListener("selectionchange",e)}},[]);const E=e=>{const t=e.commonAncestorContainer,n=t.ownerDocument?.querySelector(".block-editor-writing-flow");return n&&n.contains(t)},v=()=>{t(!1),c(""),p(null),m([]),g("")},y=async e=>{if(n&&0!==_.length){u(!0),g(""),m([]);try{const t=_[0].id,o=await i()({path:"/wp-content-flow/v1/ai/improve",method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":wpContentFlow.nonce},data:{content:n,workflow_id:t,improvement_type:e}});m(o)}catch(e){g((0,o.__)("Failed to get AI suggestions. Please try again.","wp-content-flow"))}finally{u(!1)}}};if(!e||!s)return null;const b=(()=>{if(!s)return null;const e=s.getBoundingClientRect();return{x:e.left+e.width/2,y:e.top-10}})();return(0,a.createElement)(l.Popover,{position:"top center",anchorRef:{getBoundingClientRect:()=>({x:b.x,y:b.y,width:0,height:0,top:b.y,right:b.x,bottom:b.y,left:b.x})},onClose:v,className:"wp-content-flow-improvement-toolbar"},(0,a.createElement)("div",{className:"improvement-toolbar-content"},f&&(0,a.createElement)("div",{className:"toolbar-error"},(0,a.createElement)("span",null,f),(0,a.createElement)(l.Button,{size:"small",onClick:()=>g("")},"âœ•")),w.length>0?(0,a.createElement)("div",{className:"suggestions-list"},(0,a.createElement)("div",{className:"suggestions-header"},(0,a.createElement)("strong",null,(0,o.__)("AI Suggestions:","wp-content-flow"))),w.map((e,t)=>(0,a.createElement)("div",{key:t,className:"suggestion-item"},(0,a.createElement)("div",{className:"suggestion-content"},e.suggested_content),(0,a.createElement)("div",{className:"suggestion-actions"},(0,a.createElement)(l.Button,{size:"small",variant:"primary",onClick:()=>(e=>{if(s&&e.suggested_content)try{s.deleteContents();const t=document.createTextNode(e.suggested_content);s.insertNode(t),window.getSelection().removeAllRanges(),v(),h("success",(0,o.__)("Text improved successfully!","wp-content-flow"),{type:"snackbar",isDismissible:!0})}catch(e){g((0,o.__)("Failed to apply suggestion. Please try manually.","wp-content-flow"))}})(e)},"âœ“"," ",(0,o.__)("Apply","wp-content-flow")),(0,a.createElement)("span",{className:"confidence-score"},Math.round(100*e.confidence_score),"%"))))):d?(0,a.createElement)("div",{className:"toolbar-loading"},(0,a.createElement)(l.Spinner,null),(0,a.createElement)("span",null,(0,o.__)("Getting AI suggestions...","wp-content-flow"))):(0,a.createElement)("div",{className:"improvement-options"},(0,a.createElement)("div",{className:"toolbar-header"},(0,a.createElement)("span",null,"ðŸ§ "," ",(0,o.__)("Improve with AI","wp-content-flow"))),(0,a.createElement)(l.ButtonGroup,null,(0,a.createElement)(l.Button,{size:"small",onClick:()=>y("grammar"),disabled:0===_.length},(0,o.__)("Grammar","wp-content-flow")),(0,a.createElement)(l.Button,{size:"small",onClick:()=>y("style"),disabled:0===_.length},(0,o.__)("Style","wp-content-flow")),(0,a.createElement)(l.Button,{size:"small",onClick:()=>y("clarity"),disabled:0===_.length},(0,o.__)("Clarity","wp-content-flow")),(0,a.createElement)(l.Button,{size:"small",onClick:()=>y("engagement"),disabled:0===_.length},(0,o.__)("Engagement","wp-content-flow")),(0,a.createElement)(l.Button,{size:"small",onClick:()=>y("seo"),disabled:0===_.length},(0,o.__)("SEO","wp-content-flow"))),0===_.length&&(0,a.createElement)("div",{className:"no-workflows-notice"},(0,o.__)("No active workflows found. Please create a workflow first.","wp-content-flow")))))}document.addEventListener("DOMContentLoaded",()=>{if(document.querySelector(".block-editor-page")){const e=document.createElement("div");e.id="wp-content-flow-improvement-toolbar",document.body.appendChild(e),(0,a.render)((0,a.createElement)(s),e)}})}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const o=window.React,l=window.wp.blocks,a=window.wp.blockEditor;var r=n(427),c=n(723),i=n(143),s=n(87),p=n(455),w=n.n(p);n(912);const m={name:"wp-content-flow/ai-text",title:(0,c.__)("AI Text Generator","wp-content-flow"),category:"text",icon:"admin-generic",description:(0,c.__)("Generate content using AI with customizable workflows and prompts.","wp-content-flow"),keywords:[(0,c.__)("ai","wp-content-flow"),(0,c.__)("content","wp-content-flow"),(0,c.__)("generate","wp-content-flow")],supports:{html:!1,anchor:!0,customClassName:!0,spacing:{margin:!0,padding:!0}},attributes:{content:{type:"string",source:"html",selector:".wp-content-flow-ai-generated-content",default:""},workflowId:{type:"number",default:0},prompt:{type:"string",default:""},isGenerating:{type:"boolean",default:!1},lastGenerated:{type:"string",default:""},confidence:{type:"number",default:0}},edit:d,save:function({attributes:e}){const{content:t}=e,n=a.useBlockProps.save();return(0,o.createElement)("div",{...n},t&&(0,o.createElement)(a.RichText.Content,{className:"wp-content-flow-ai-generated-content",tagName:"div",value:t}))}};function d({attributes:e,setAttributes:t,isSelected:n}){const{content:l,workflowId:p,prompt:m,isGenerating:d,confidence:u}=e,[f,g]=(0,s.useState)(""),[_,h]=(0,s.useState)({}),[E,v]=(0,s.useState)([]);(0,s.useEffect)(()=>{window.wpContentFlow&&window.wpContentFlow.defaultWorkflows&&v(window.wpContentFlow.defaultWorkflows)},[]);const y=(0,i.useSelect)(e=>{const t=e("wp-content-flow/workflows");if(t&&t.getWorkflows){const e=t.getWorkflows();if(e&&e.length>0)return e}return null},[])||E,{createNotice:b}=(0,i.useDispatch)("core/notices");(0,s.useEffect)(()=>{const e={};m.trim()||(e.prompt=(0,c.__)("Prompt is required","wp-content-flow")),p||(e.workflow=(0,c.__)("Please select a workflow","wp-content-flow")),h(e)},[m,p]);const k=async()=>{if(Object.keys(_).length>0)g((0,c.__)("Please fix the validation errors before generating content.","wp-content-flow"));else{t({isGenerating:!0}),g("");try{const e=await w()({path:"/wp-content-flow/v1/ai/generate",method:"POST",data:{prompt:m,workflow_id:p,post_id:wp.data&&wp.data.select&&wp.data.select("core/editor")?wp.data.select("core/editor").getCurrentPostId():null,parameters:{max_tokens:1e3,temperature:.7}}});t({content:e.suggested_content,confidence:e.confidence_score,lastGenerated:(new Date).toISOString(),isGenerating:!1}),b("success",(0,c.__)("AI content generated successfully!","wp-content-flow"),{type:"snackbar",isDismissible:!0})}catch(e){let n=(0,c.__)("Failed to generate content. Please try again.","wp-content-flow");"rate_limit_exceeded"===e.code?n=(0,c.__)("Too many requests. Please try again later.","wp-content-flow"):"workflow_not_found"===e.code&&(n=(0,c.__)("Selected workflow not found. Please choose a different workflow.","wp-content-flow")),g(n),t({isGenerating:!1})}}},C=(0,a.useBlockProps)({className:"wp-content-flow-ai-text-generator"}),x=[{label:(0,c.__)("Select a workflow...","wp-content-flow"),value:0},...y.map(e=>({label:e.name,value:e.id}))];return(0,o.createElement)("div",{...C},(0,o.createElement)(a.BlockControls,null,(0,o.createElement)(r.ToolbarGroup,null,(0,o.createElement)(r.ToolbarButton,{icon:"controls-repeat",label:(0,c.__)("Regenerate","wp-content-flow"),onClick:()=>{l&&k()},disabled:d||!l}),(0,o.createElement)(r.ToolbarButton,{icon:"edit",label:(0,c.__)("Improve","wp-content-flow"),onClick:()=>(async()=>{if(l){t({isGenerating:!0}),g("");try{const e=await w()({path:"/wp-content-flow/v1/ai/improve",method:"POST",data:{content:l,workflow_id:p,improvement_type:"style"}});e.length>0&&(t({content:e[0].suggested_content,confidence:e[0].confidence_score,isGenerating:!1}),b("success",(0,c.__)("Content improved successfully!","wp-content-flow"),{type:"snackbar",isDismissible:!0}))}catch(e){g((0,c.__)("Failed to improve content. Please try again.","wp-content-flow")),t({isGenerating:!1})}}})(),disabled:d||!l}))),(0,o.createElement)(a.InspectorControls,null,(0,o.createElement)(r.PanelBody,{title:(0,c.__)("AI Settings","wp-content-flow"),initialOpen:!0},(0,o.createElement)(r.SelectControl,{label:(0,c.__)("Workflow","wp-content-flow"),value:p,options:x,onChange:e=>t({workflowId:parseInt(e)}),help:_.workflow}),p>0&&(0,o.createElement)(r.TextareaControl,{label:(0,c.__)("Content Prompt","wp-content-flow"),value:m,onChange:e=>t({prompt:e}),placeholder:(0,c.__)("Enter your content prompt...","wp-content-flow"),rows:4,help:_.prompt||(0,c.__)("Describe what content you want to generate.","wp-content-flow")})),u>0&&(0,o.createElement)(r.PanelBody,{title:(0,c.__)("Parameters","wp-content-flow"),initialOpen:!1},(0,o.createElement)("p",null,(0,o.createElement)("strong",null,(0,c.__)("Confidence Score:","wp-content-flow"))," ",Math.round(100*u),"%"),u<.7&&(0,o.createElement)(r.Notice,{status:"warning",isDismissible:!1},(0,c.__)("Low confidence score. Consider regenerating with a more specific prompt.","wp-content-flow")))),(0,o.createElement)("div",{className:"wp-content-flow-ai-block-content"},f&&(0,o.createElement)(r.Notice,{status:"error",isDismissible:!0,onRemove:()=>g("")},f),Object.keys(_).length>0&&n&&(0,o.createElement)(r.Notice,{status:"warning",isDismissible:!1},Object.values(_).join(", ")),d?(0,o.createElement)("div",{className:"wp-content-flow-generating"},(0,o.createElement)(r.Spinner,null),(0,o.createElement)("p",null,(0,c.__)("Generating AI content...","wp-content-flow"))):(0,o.createElement)(o.Fragment,null,l?(0,o.createElement)("div",{className:"wp-content-flow-generated-content"},(0,o.createElement)(a.RichText,{className:"content-display",tagName:"div",value:l,onChange:e=>t({content:e}),placeholder:(0,c.__)("Generated content will appear here...","wp-content-flow")}),u>0&&(0,o.createElement)("div",{className:"confidence-indicator"},(0,o.createElement)("small",null,(0,c.__)("Confidence:","wp-content-flow")," ",Math.round(100*u),"%"))):(0,o.createElement)("div",{className:"wp-content-flow-placeholder"},(0,o.createElement)("div",{style:{padding:"20px",background:"#f5f5f5",borderRadius:"4px"}},(0,o.createElement)("h3",null,(0,c.__)("AI Content Generator","wp-content-flow")),(0,o.createElement)(r.SelectControl,{label:(0,c.__)("Select Workflow","wp-content-flow"),value:p,options:x,onChange:e=>t({workflowId:parseInt(e)}),help:_.workflow}),p>0&&(0,o.createElement)(r.TextareaControl,{label:(0,c.__)("Content Prompt","wp-content-flow"),value:m,onChange:e=>t({prompt:e}),placeholder:(0,c.__)("Enter your content prompt...","wp-content-flow"),rows:4,help:_.prompt||(0,c.__)("Describe what content you want to generate.","wp-content-flow")}),p>0&&m&&(0,o.createElement)(r.Button,{variant:"primary",onClick:k,disabled:Object.keys(_).length>0,style:{marginTop:"10px"}},(0,c.__)("Generate Content","wp-content-flow")),!p&&(0,o.createElement)("p",{style:{color:"#666",fontStyle:"italic"}},(0,c.__)("Please select a workflow to begin.","wp-content-flow")))))))}const u=[{attributes:{content:{type:"string",default:""},workflowId:{type:"number",default:0},prompt:{type:"string",default:""},isGenerating:{type:"boolean",default:!1},lastGenerated:{type:"string",default:""},confidence:{type:"number",default:0}},save({attributes:e}){const{content:t}=e,n=a.useBlockProps.save();return(0,o.createElement)("div",{...n},t&&(0,o.createElement)("div",{className:"wp-content-flow-ai-generated-content",dangerouslySetInnerHTML:{__html:t}}))},migrate:e=>({...e,isGenerating:void 0})}];(0,l.registerBlockType)(m.name,{...m,edit:function(e){try{return(0,o.createElement)(d,{...e})}catch(e){return console.error("AI Text Generator Block Error:",e),(0,o.createElement)("div",{...(0,a.useBlockProps)()},(0,o.createElement)("div",{className:"wp-content-flow-block-error"},(0,o.createElement)("p",null,(0,c.__)("This block encountered an error. Please refresh the page or recreate the block.","wp-content-flow"))))}},deprecated:u}),function(){const{registerPlugin:e}=wp.plugins,{PluginSidebar:t,PluginSidebarMoreMenuItem:n}=wp.editPost,{Panel:o,PanelBody:l,PanelRow:a,Button:r,TextareaControl:c,SelectControl:i,Spinner:s,ToggleControl:p,RangeControl:w}=wp.components,{useState:m,useEffect:d}=wp.element,{__}=wp.i18n,{select:u,useSelect:f,dispatch:g}=wp.data,{apiFetch:_}=wp,h=()=>{const[e,t]=m("generate"),[n,h]=m(""),[E,v]=m([]),[y,b]=m(""),[k,C]=m(!1),[x,S]=m([]),[P,I]=m(""),[N,B]=m({cache_enabled:!0,cache_duration:1800,rate_limit_enabled:!0,requests_per_minute:10,auto_save_enabled:!0,debug_mode:!1}),[A,G]=m(!1),[T,O]=m(!1),F=f(e=>{const t=e("core/block-editor");if(t&&t.getSelectedBlock){const e=t.getSelectedBlock();return e?[e]:[]}return[]},[]);d(()=>{z(),R()},[]),d(()=>{if(1===F.length){const e=F[0];e.attributes&&e.attributes.content&&I(e.attributes.content)}else I("")},[F]);const z=async()=>{try{const e=await _({path:"/wp-content-flow/v1/workflows",method:"GET"});Array.isArray(e)?(v(e),e.length>0&&b(e[0].id.toString())):e&&e.success?(v(e.data||[]),e.data&&e.data.length>0&&b(e.data[0].id.toString())):v([])}catch(e){console.warn("Could not load workflows, using defaults:",e),v([{id:1,name:"Blog Post Workflow",description:"For blog content generation"},{id:2,name:"Product Description",description:"For product descriptions"},{id:3,name:"Social Media",description:"For social media posts"}]),b("1")}},R=async()=>{try{const e=await _({path:"/wp-content-flow/v1/settings"});e&&B(e)}catch(e){console.warn("Could not load settings:",e)}},D=(e,t)=>{B(n=>({...n,[e]:t})),O(!0)},M=async e=>{if(P&&y){C(!0);try{const t=await _({path:"/wp-content-flow/v1/ai/improve",method:"POST",data:{content:P,improvement_type:e,workflow_id:parseInt(y)}});t.success&&S(n=>[...n,{id:t.data.suggestion_id,content:t.data.improved_content,confidence_score:t.data.confidence_score,type:"improvement",improvement_type:e,original_content:P,timestamp:new Date}])}catch(e){console.error("Content improvement failed:",e)}finally{C(!1)}}};return wp.element.createElement(o,null,wp.element.createElement("div",{style:{padding:"16px",borderBottom:"1px solid #ddd"}},wp.element.createElement("div",{style:{display:"flex",gap:"8px"}},wp.element.createElement(r,{variant:"generate"===e?"primary":"secondary",size:"small",onClick:()=>t("generate")},__("Generate","wp-content-flow")),wp.element.createElement(r,{variant:"improve"===e?"primary":"secondary",size:"small",onClick:()=>t("improve")},__("Improve","wp-content-flow")),wp.element.createElement(r,{variant:"settings"===e?"primary":"secondary",size:"small",onClick:()=>t("settings")},__("Settings","wp-content-flow")))),"generate"===e&&wp.element.createElement(l,{title:__("AI Content Generator","wp-content-flow"),initialOpen:!0},wp.element.createElement(a,null,wp.element.createElement(i,{label:__("Workflow","wp-content-flow"),value:y,onChange:b,options:[{value:"",label:__("Select a workflow...","wp-content-flow")},...E.map(e=>({value:e.id.toString(),label:e.name}))]})),wp.element.createElement(a,null,wp.element.createElement(c,{label:__("Prompt","wp-content-flow"),value:n,onChange:h,placeholder:__("Describe what content you want to generate...","wp-content-flow"),rows:4})),wp.element.createElement(a,null,wp.element.createElement(r,{variant:"primary",onClick:async()=>{if(n.trim()&&y){C(!0);try{const e=u("core/editor").getCurrentPostId(),t=await _({path:"/wp-content-flow/v1/ai/generate",method:"POST",data:{prompt:n,workflow_id:parseInt(y),post_id:e,selected_content:P}});t.success&&(S(e=>[...e,{id:t.data.suggestion_id,content:t.data.content,confidence_score:t.data.confidence_score,type:"generation",timestamp:new Date}]),h(""))}catch(e){console.error("Content generation failed:",e)}finally{C(!1)}}},disabled:!n.trim()||!y||k,style:{width:"100%"}},k?wp.element.createElement("span",null,wp.element.createElement(s),__("Generating...","wp-content-flow")):__("Generate Content","wp-content-flow")))),"improve"===e&&P&&wp.element.createElement(l,{title:__("Improve Selected Text","wp-content-flow"),initialOpen:!0},wp.element.createElement(a,null,wp.element.createElement("p",null,wp.element.createElement("strong",null,__("Selected:","wp-content-flow")))),wp.element.createElement(a,null,wp.element.createElement("div",{style:{padding:"8px",background:"#f0f0f0",borderRadius:"4px",fontSize:"12px",maxHeight:"100px",overflow:"auto"}},P.substring(0,200)+(P.length>200?"...":""))),wp.element.createElement(a,null,wp.element.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"}},wp.element.createElement(r,{variant:"secondary",size:"small",onClick:()=>M("grammar"),disabled:k},__("Fix Grammar","wp-content-flow")),wp.element.createElement(r,{variant:"secondary",size:"small",onClick:()=>M("style"),disabled:k},__("Improve Style","wp-content-flow")),wp.element.createElement(r,{variant:"secondary",size:"small",onClick:()=>M("clarity"),disabled:k},__("Improve Clarity","wp-content-flow")),wp.element.createElement(r,{variant:"secondary",size:"small",onClick:()=>M("seo"),disabled:k},__("SEO Optimize","wp-content-flow"))))),("generate"===e||"improve"===e)&&x.length>0&&wp.element.createElement(l,{title:__("AI Suggestions","wp-content-flow"),initialOpen:!0},x.map(e=>wp.element.createElement("div",{key:e.id,style:{border:"1px solid #ddd",borderRadius:"4px",padding:"12px",marginBottom:"12px",background:"#fff"}},wp.element.createElement("div",{style:{marginBottom:"8px"}},wp.element.createElement("strong",null,"improvement"===e.type?__(`${e.improvement_type} improvement`,"wp-content-flow"):__("Generated content","wp-content-flow")),window.wpContentFlow&&window.wpContentFlow.showConfidenceScores&&wp.element.createElement("span",{style:{float:"right",fontSize:"12px",color:e.confidence_score>.8?"#4CAF50":"#FF9800"}},Math.round(100*e.confidence_score)+"% "+__("confidence","wp-content-flow"))),wp.element.createElement("div",{style:{background:"#f9f9f9",padding:"8px",borderRadius:"4px",marginBottom:"8px",fontSize:"14px",maxHeight:"150px",overflow:"auto"}},e.content),wp.element.createElement("div",{style:{display:"flex",gap:"8px"}},wp.element.createElement(r,{variant:"primary",size:"small",onClick:()=>(e=>{const{replaceBlocks:t,insertBlocks:n}=g("core/block-editor"),{createBlock:o}=wp.blocks;if(1===F.length){const n=F[0],l=o(n.name,{...n.attributes,content:e.content});t(n.clientId,l)}else n(o("core/paragraph",{content:e.content}));(async e=>{try{await _({path:`/wp-content-flow/v1/suggestions/${e}/accept`,method:"POST"}),S(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to accept suggestion:",e)}})(e.id)})(e)},__("Accept","wp-content-flow")),wp.element.createElement(r,{variant:"secondary",size:"small",onClick:()=>(async e=>{try{await _({path:`/wp-content-flow/v1/suggestions/${e}/reject`,method:"POST"}),S(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to reject suggestion:",e)}})(e.id)},__("Reject","wp-content-flow")))))),"settings"===e&&wp.element.createElement("div",null,wp.element.createElement(l,{title:__("General Settings","wp-content-flow"),initialOpen:!0},wp.element.createElement(a,null,wp.element.createElement(p,{label:__("Enable Caching","wp-content-flow"),checked:N.cache_enabled,onChange:e=>D("cache_enabled",e),help:__("Cache AI responses to improve performance.","wp-content-flow")})),N.cache_enabled&&wp.element.createElement(a,null,wp.element.createElement(w,{label:__("Cache Duration (minutes)","wp-content-flow"),value:Math.round(N.cache_duration/60),onChange:e=>D("cache_duration",60*e),min:5,max:1440,step:5,help:__("How long to cache AI responses.","wp-content-flow")})),wp.element.createElement(a,null,wp.element.createElement(p,{label:__("Auto-save Content","wp-content-flow"),checked:N.auto_save_enabled,onChange:e=>D("auto_save_enabled",e),help:__("Automatically save posts when AI content is generated.","wp-content-flow")})),wp.element.createElement(a,null,wp.element.createElement(p,{label:__("Debug Mode","wp-content-flow"),checked:N.debug_mode,onChange:e=>D("debug_mode",e),help:__("Enable detailed logging for troubleshooting.","wp-content-flow")}))),wp.element.createElement(l,{title:__("Rate Limits","wp-content-flow"),initialOpen:!1},wp.element.createElement(a,null,wp.element.createElement(p,{label:__("Enable Rate Limiting","wp-content-flow"),checked:N.rate_limit_enabled,onChange:e=>D("rate_limit_enabled",e),help:__("Limit API requests to prevent quota exhaustion.","wp-content-flow")})),N.rate_limit_enabled&&wp.element.createElement(a,null,wp.element.createElement(w,{label:__("Requests per Minute","wp-content-flow"),value:N.requests_per_minute,onChange:e=>D("requests_per_minute",e),min:1,max:60,step:1}))),wp.element.createElement("div",{style:{padding:"16px",borderTop:"1px solid #ddd"}},wp.element.createElement(r,{variant:"primary",onClick:async()=>{G(!0);try{await _({path:"/wp-content-flow/v1/settings",method:"POST",data:N}),O(!1)}catch(e){console.error("Failed to save settings:",e)}finally{G(!1)}},disabled:A||!T},A?wp.element.createElement(s):"âœ“ "+__("Save Settings","wp-content-flow")),T&&wp.element.createElement("div",{style:{marginTop:"8px",fontSize:"12px",color:"#f56565"}},__("You have unsaved changes","wp-content-flow")))))};e("wp-content-flow-ai-chat",{render:()=>wp.element.createElement("div",null,wp.element.createElement(n,{target:"wp-content-flow-ai-chat",icon:"admin-site-alt3"},__("AI Chat","wp-content-flow")),wp.element.createElement(t,{name:"wp-content-flow-ai-chat",title:__("AI Content Flow","wp-content-flow"),icon:"admin-site-alt3"},wp.element.createElement(h)))}),console.log("WP Content Flow: AI Chat panel registered successfully")}()})();